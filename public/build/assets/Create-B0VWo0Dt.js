import{u as j,r as v,j as e,H as f,L as d}from"./app-Da5hok_Z.js";import{A as y}from"./AuthenticatedLayout-W5MPSpi7.js";import"./transition-B5hQLC2f.js";function C({cajaAbierta:i,categorias:a}){const{data:s,setData:o,post:m,processing:l,errors:t}=j({categoria_id:"",tipo:"",monto:"",concepto:"",observaciones:"",comprobante:null}),[x,c]=v.useState(a),p=r=>{const n=r.target.value;if(o("tipo",n),o("categoria_id",""),n){const b=a.filter(g=>g.tipo===n);c(b)}else c(a)},u=r=>{r.preventDefault(),m(route("movimientos-caja.store"))},h=r=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(r);return e.jsxs(y,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Nuevo Movimiento de Caja"}),e.jsxs(d,{href:route("movimientos-caja.index"),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition font-semibold",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Volver"]})]}),children:[e.jsx(f,{title:"Nuevo Movimiento"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6 bg-blue-50 border-l-4 border-blue-400 p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 text-blue-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-blue-800",children:["Caja del ",new Date(i.fecha).toLocaleDateString("es-CO")]}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Monto de apertura: ",h(i.monto_apertura)]})]})]})}),e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tipo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Movimiento *"}),e.jsxs("select",{id:"tipo",value:s.tipo,onChange:p,className:`block w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${t.tipo?"border-red-500":"border-gray-300"}`,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un tipo"}),e.jsx("option",{value:"ingreso",children:"Ingreso"}),e.jsx("option",{value:"egreso",children:"Egreso"})]}),t.tipo&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.tipo})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"categoria_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría *"}),e.jsxs("select",{id:"categoria_id",value:s.categoria_id,onChange:r=>o("categoria_id",r.target.value),className:`block w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${t.categoria_id?"border-red-500":"border-gray-300"}`,required:!0,disabled:!s.tipo,children:[e.jsx("option",{value:"",children:"Seleccione una categoría"}),x.map(r=>e.jsx("option",{value:r.id,children:r.nombre},r.id))]}),t.categoria_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.categoria_id}),!s.tipo&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Primero seleccione el tipo de movimiento"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"monto",className:"block text-sm font-medium text-gray-700 mb-2",children:"Monto *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 font-medium",children:"$"})}),e.jsx("input",{type:"number",id:"monto",value:s.monto,onChange:r=>o("monto",r.target.value),step:"0.01",min:"0.01",className:`block w-full pl-8 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${t.monto?"border-red-500":"border-gray-300"}`,placeholder:"0.00",required:!0})]}),t.monto&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.monto})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"concepto",className:"block text-sm font-medium text-gray-700 mb-2",children:"Concepto *"}),e.jsx("input",{type:"text",id:"concepto",value:s.concepto,onChange:r=>o("concepto",r.target.value),className:`block w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${t.concepto?"border-red-500":"border-gray-300"}`,placeholder:"Descripción del movimiento",required:!0}),t.concepto&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.concepto})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaciones"}),e.jsx("textarea",{id:"observaciones",value:s.observaciones,onChange:r=>o("observaciones",r.target.value),rows:"3",className:`block w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent ${t.observaciones?"border-red-500":"border-gray-300"}`,placeholder:"Información adicional (opcional)"}),t.observaciones&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.observaciones})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"comprobante",className:"block text-sm font-medium text-gray-700 mb-2",children:"Comprobante/Factura"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex-1 flex items-center justify-center px-4 py-6 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer hover:border-primary-500 transition",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-sm font-medium text-primary-600",children:"Subir archivo"}),e.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG hasta 2MB"})]})]}),e.jsx("input",{id:"comprobante",type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:r=>o("comprobante",r.target.files[0])})]}),s.comprobante&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm text-green-800",children:s.comprobante.name}),e.jsx("button",{type:"button",onClick:()=>o("comprobante",null),className:"text-green-600 hover:text-green-800",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),t.comprobante&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.comprobante})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[e.jsx(d,{href:route("movimientos-caja.index"),className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-semibold",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:l,className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Guardar Movimiento"]})})]})]})})]})})]})}export{C as default};
