import{j as e,b as m,r as o,H as h,L as g}from"./app-BcFT7WYG.js";import{A as j}from"./AuthenticatedLayout-BOAfC5sU.js";import{M as p}from"./Modal-DztAfWZh.js";import"./transition-B_sySLsM.js";function u({compra:t}){const a=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(s),l=s=>new Date(s).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"factura-container hidden print:block",children:[e.jsxs("div",{className:"text-center mb-4 border-b-2 border-green-700 pb-3",children:[e.jsx("img",{src:"/images/logo_factura.png",alt:"MAGNOR",className:"mx-auto mb-2",style:{maxWidth:"120px",height:"auto"},onError:s=>{s.target.style.display="none",s.target.nextElementSibling.style.display="block"}}),e.jsx("h1",{className:"text-2xl font-bold text-green-700",style:{display:"none"},children:"MAGNOR"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Sistema de Gestión de Chatarrería | Soluciones en Reciclaje y Materiales"}),e.jsx("h2",{className:"text-lg font-bold text-green-700 mt-2",children:"FACTURA DE COMPRA"})]}),e.jsxs("div",{className:"flex justify-between mb-3 text-xs",children:[e.jsx("div",{className:"w-1/2",children:e.jsxs("div",{className:"bg-gray-50 p-2 rounded mb-2",children:[e.jsx("h3",{className:"text-sm font-bold text-green-700 border-b border-gray-300 mb-1",children:"Información de la Compra"}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID de Compra:"})," #",t.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Fecha:"})," ",l(t.fecha_compra)]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Creado:"})," ",new Date(t.created_at).toLocaleString("es-CO")]})]})}),e.jsx("div",{className:"w-1/2 pl-2",children:t.proveedor?e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsxs("h3",{className:"text-sm font-bold text-green-700 border-b border-gray-300 mb-1",children:["Proveedor",t.proveedor.es_reciclador&&e.jsx("span",{className:"ml-2 px-2 py-1 bg-green-500 text-white rounded text-xs",children:"RECICLADOR"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",t.proveedor.nombre]}),t.proveedor.documento&&e.jsxs("p",{children:[e.jsx("strong",{children:"Documento:"})," ",t.proveedor.documento]}),t.proveedor.telefono&&e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",t.proveedor.telefono]}),t.proveedor.direccion&&e.jsxs("p",{children:[e.jsx("strong",{children:"Dirección:"})," ",t.proveedor.direccion]})]}):e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsx("h3",{className:"text-sm font-bold text-green-700 border-b border-gray-300 mb-1",children:"Proveedor"}),e.jsx("p",{className:"text-gray-500 italic",children:"Sin proveedor asignado"})]})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h3",{className:"text-sm font-bold text-green-700 border-b border-green-700 mb-2",children:"Detalle de Materiales"}),e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{className:"bg-green-700 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"#"}),e.jsx("th",{className:"p-2 text-left",children:"Material"}),e.jsx("th",{className:"p-2 text-center",children:"Cantidad"}),e.jsx("th",{className:"p-2 text-right",children:"Precio Unitario"}),e.jsx("th",{className:"p-2 text-right",children:"Subtotal"})]})}),e.jsx("tbody",{children:t.detalles&&t.detalles.map((s,n)=>e.jsxs("tr",{className:n%2===0?"bg-gray-50":"",children:[e.jsx("td",{className:"p-2 text-center border-b",children:n+1}),e.jsx("td",{className:"p-2 border-b",children:e.jsx("strong",{children:s.material?.nombre||"Material"})}),e.jsxs("td",{className:"p-2 text-center border-b",children:[s.cantidad," ",s.material?.unidad_medida||"kg"]}),e.jsx("td",{className:"p-2 text-right border-b",children:a(s.precio_unitario)}),e.jsx("td",{className:"p-2 text-right border-b font-semibold",children:a(s.subtotal)})]},s.id))})]})]}),e.jsx("div",{className:"flex justify-end mb-3",children:e.jsx("div",{className:"w-64",children:e.jsx("table",{className:"w-full text-xs",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 font-bold",children:"Subtotal:"}),e.jsx("td",{className:"p-2 text-right",children:a(t.total)})]}),e.jsxs("tr",{className:"bg-green-700 text-white font-bold",children:[e.jsx("td",{className:"p-2",children:"TOTAL:"}),e.jsxs("td",{className:"p-2 text-right text-lg",children:[a(t.total)," COP"]})]})]})})})}),t.observaciones&&e.jsxs("div",{className:"mb-3 bg-gray-50 p-2 rounded",children:[e.jsx("h3",{className:"text-sm font-bold text-green-700 mb-1",children:"Observaciones"}),e.jsx("p",{className:"text-xs",children:t.observaciones})]}),e.jsxs("div",{className:"mt-4 pt-2 border-t border-green-700 text-center text-xs text-gray-500",children:[e.jsxs("p",{children:["Documento generado el ",new Date().toLocaleString("es-CO")]}),e.jsx("p",{className:"font-semibold",children:"MAGNOR - Sistema de Gestión de Chatarrería"})]})]})}function v({compra:t}){const{flash:a}=m().props,[l,s]=o.useState(!1);o.useEffect(()=>{a?.mostrarModalFactura&&s(!0)},[a]);const n=r=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(r),x=r=>new Date(r).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"}),i=()=>{s(!1),setTimeout(()=>window.print(),100)},d=()=>{s(!1),window.open(route("compras.factura",t.id),"_blank")},c=()=>{s(!1)};return e.jsxs(j,{header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Detalle de Compra"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:i,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimir"]}),e.jsxs("button",{onClick:d,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Descargar PDF"]}),e.jsx(g,{href:route("compras.index"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Volver"})]})]}),children:[e.jsx(h,{title:`Compra #${t.id}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-6xl sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información General"}),e.jsxs("dl",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Fecha"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:x(t.fecha)})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Proveedor"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[t.proveedor?.nombre||"N/A",t.proveedor?.documento&&e.jsxs("span",{className:"text-gray-500",children:[" - ",t.proveedor.documento]})]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Total"}),e.jsx("dd",{className:"mt-1 text-lg font-bold text-green-600",children:n(t.total)})]})]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalles de la Compra"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cantidad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio Unitario"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.detalles&&t.detalles.length>0?t.detalles.map(r=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r.material?.nombre||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:r.material?.unidad_medida||""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.cantidad}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n(r.precio_unitario)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:n(r.subtotal)})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No hay detalles disponibles"})})})]})})]})]})}),e.jsx(u,{compra:t}),e.jsx(p,{show:l,onClose:c,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-green-100",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),e.jsx("h3",{className:"text-lg font-medium text-center text-gray-900 mb-2",children:"¡Compra registrada exitosamente!"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-6",children:"¿Deseas imprimir o descargar la factura?"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:i,className:"inline-flex justify-center items-center gap-2 w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimir Factura"]}),e.jsxs("button",{onClick:d,className:"inline-flex justify-center items-center gap-2 w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Descargar PDF"]}),e.jsx("button",{onClick:c,className:"inline-flex justify-center items-center gap-2 w-full px-4 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cerrar"})]})]})})]})}export{v as default};
