import{u as g,r as j,j as e,H as y}from"./app-Da5hok_Z.js";import{A as f}from"./AuthenticatedLayout-W5MPSpi7.js";import"./transition-B5hQLC2f.js";function N({materiales:t}){const{data:i,setData:x,post:m,processing:c}=g({precios:t.map(s=>({id:s.id,precio_dia_compra:s.precio_dia_compra||s.precio_compra,precio_dia_venta:s.precio_dia_venta||s.precio_venta}))}),[o,u]=j.useState(""),n=(s,p,r)=>{const a=[...i.precios];a[s][p]=r,x("precios",a)},h=s=>{s.preventDefault(),m(route("precios.update"),{onSuccess:()=>{alert("Precios actualizados correctamente")}})},d=s=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(s),l=t.filter(s=>s.nombre.toLowerCase().includes(o.toLowerCase()));return e.jsxs(f,{header:e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Precios del Día"})}),children:[e.jsx(y,{title:"Precios del Día"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:o,onChange:s=>u(s.target.value),placeholder:"Buscar material...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("form",{onSubmit:h,className:"p-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio Base Compra"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio Día Compra"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio Base Venta"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio Día Venta"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.length>0?l.map((s,p)=>{const r=t.findIndex(a=>a.id===s.id);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.nombre}),e.jsx("div",{className:"text-sm text-gray-500",children:s.unidad_medida})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(s.precio_compra)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"number",step:"0.01",value:i.precios[r].precio_dia_compra,onChange:a=>n(r,"precio_dia_compra",a.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(s.precio_venta)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"number",step:"0.01",value:i.precios[r].precio_dia_venta,onChange:a=>n(r,"precio_dia_venta",a.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})})]},s.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"No se encontraron materiales"})})})]})}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{type:"submit",disabled:c,className:"inline-flex items-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition disabled:opacity-50 font-semibold shadow-md",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c?"Guardando...":"Guardar Precios del Día"]})})]})}),e.jsx("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Los precios del día se utilizan para operaciones específicas. Si no se establecen, se utilizarán los precios base. Al actualizar, todos los precios se guardarán automáticamente."})})]})})]})})]})}export{N as default};
